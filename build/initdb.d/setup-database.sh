# !/bin/sh

# Create-users.sh

set -e

echo "Creating additional PostgreSQL tables and roles..."
psql -v ON_ERROR_STOP=1 --username "${POSTGRES_USER}" <<-EOSQL
  CREATE DATABASE ${DB_DATABASE};
  CREATE ROLE ${DB_USERNAME} WITH LOGIN PASSWORD '${DB_PASSWORD}';
  GRANT ALL PRIVILEGES ON DATABASE ${DB_DATABASE} TO ${DB_USERNAME};
  CREATE ROLE ${USERNAME} WITH LOGIN PASSWORD '${USER_PASSWORD}';
  GRANT ALL PRIVILEGES ON DATABASE ${DB_DATABASE} TO ${USERNAME};
EOSQL
